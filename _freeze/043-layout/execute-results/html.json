{
  "hash": "ccf75e5b1891c88aaf0e425f4595d56b",
  "result": {
    "engine": "knitr",
    "markdown": "\n# Eléments de mise en page\n\nQuelques indications sur des mises en pages spécifiques pour des documents de type articles/notebook en format html. Cela concernera l'édition sous forme de colonnes, l'insertion d'éléments dans la zône du grid située à droite (margin) et la mise en page de plusieurs images ou graphiques sous forme de vignettes. Sur ce dernier aspect, il s'agit de tirer profit de l'option **`lightbox`**.\n\n* Affichage d'éléments dans la partie droite du grid (margin):\n  * Générique: utilisation de la classe Css `.column-margin`.\n  * Dans un programme (graphique, tableau): option `column: margin`.\n  * Cas particuliers: insertion d'un tableau markdown et d'une note.\n\n* Mise en page avec plusieurs colonnes:\n  * Classe css multicolumn. Pas recommandé à l'exception d'éléments texte.\n  * Mise en page fixe. Classe css ou option dans un bloc de codes: `layout-ncol`.\n  * Mise en page libre. Classe css ou option dans un bloc de codes: `layout`.\n    * `layout= \"[liste items col]\"`.\n    * `layout= \"[[liste items col], [liste item ligne]]\"`.\n\n\n## Rappel sur l'édition en multicolonne\n\n* A réserver plutôt à des éléments texte: paragraphe ou liste. Particulièrement utile pour les présentations de type revealjs.\n\n* Une colonne simple: dans une section div: classe css **`{.column width=\"x%\"}`**\n\n```{.mf}\n::: {.column width=\"33%\"}\nQuelques indications sur des mises en pages spécifiques pour des documents de type articles/notebook en format html.\n::: \n```\n\n::: {.column width=\"33%\"}\nQuelques indications sur des mises en pages spécifiques pour des documents de type articles/notebook en format html.\n::: \n\n* Plusieurs colonnes: \n  * On indique une mise en page sur plusieurs colonnes avec une déclaration préalable: section div introduite avec 4 *:* (imbrication) et la classe `{.columns}`:\n  * **`:::: {.columns}`**\n\n```{.mf}\n:::: {.columns}\n::: {.column width=\"33%\"}\nQuelques indications sur des mises en pages spécifiques pour des documents de type articles/notebook en format html.\n::: \n::: {.column width=\"33%\"}\nCela concernera l'édition sous forme de colonnes, l'insertion d'éléments dans la zône du grid située à droite (margin) et la mise en page de plusieurs images ou graphiques sous forme de vignettes.\n::: \n::: {.column width=\"33%\"}\nSur ce dernier aspect, il s'agit de tirer profit de l'option **`lightbox`**.\n::::\n```\n\n\n:::: {.columns}\n::: {.column width=\"33%\"}\nOn trouvera ici quelques indications sur des mises en pages spécifiques pour des documents de type articles/notebook en format html.\n::: \n::: {.column width=\"33%\"}\nCela concernera l'édition sous forme de colonnes, l'insertion d'éléments dans la zône du grid située à droite (margin) et la mise en page de plusieurs images ou graphiques sous forme de vignettes.\n::: \n::: {.column width=\"33%\"}\nSur le second aspect, il s'agit de tirer profit de l'option **`lightbox`**.\n::: \n::::\n\n* On peut augmenter l'espace entre deux colonnes en ajoutant des colonnes *vide* et en jouant sur la largeur.\n\n```{.mf}\n:::: {.columns}\n::: {.column width=\"29%\"}\nQuelques indications sur des mises en pages spécifiques pour des documents de type articles/notebook en format html.\n::: \n::: {.column width=\"6%\"}\n:::\n::: {.column width=\"29%\"}\nCela concernera l'édition sous forme de colonnes, l'insertion d'éléments dans la zône du grid située à droite (margin) et la mise en page de plusieurs images ou graphiques sous forme de vignettes.\n::: \n::: {.column width=\"6%\"}\n:::\n::: {.column width=\"29%\"}\nSur ce dernier aspect, il s'agit de tirer profit de l'option **`lightbox`**.\n:::\n::::\n```\n\n:::: {.columns}\n::: {.column width=\"29%\"}\nQuelques indications sur des mises en pages spécifiques pour des documents de type articles/notebook en format html.\n::: \n::: {.column width=\"6%\"}\n:::\n::: {.column width=\"29%\"}\nCela concernera l'édition sous forme de colonnes, l'insertion d'éléments dans la zône du grid située à droite (margin) et la mise en page de plusieurs images ou graphiques sous forme de vignettes.\n::: \n::: {.column width=\"6%\"}\n:::\n::: {.column width=\"29%\"}\nSur ce dernier aspect, il s'agit de tirer profit de l'option **`lightbox`**.\n:::\n::::\n\n\n\n\n## Insertion d'éléments dans la marge à droite du document\n\nPour les éléments de type image/graphique, penser à activé l'option `lightbox` qui permettra de les agrandir dans une fenêtre. \n\n::: callout-note\n\n#### Format PDF\n\nPour le format pdf, utiliser dans le yaml les options suivantes\n   \n* Graphiques:  `cap-location:margin`\n* Titres des graphiques:  `fig-cap-location: margin`\n* Titre des tableaux: `fig-cap-location: margin`\n\n:::\n\n### La classe css générique `.column-margin`\n\n\n*Syntaxe*:\n\n```{.mf}\n::: {.column-margin}\n\nElements à insérer\n\n:::\n```\n\n**Image Markdown**  \n\n* Penser à activer l'option `lightbox` qui permettra d'agrandir\n\n```{.mf}\n::: {.column-margin}\n![Logo Quarto](https://quarto.org/quarto.png)\n:::\n```\n\n::: {.column-margin}\n![Logo Quarto](https://quarto.org/quarto.png)\n:::\n\n**Graphique généré dans un programme**  \n\n* Un peu compliqué pour reporter proprement cela dans le support...mais ça marche.\n* Il me semble préférable d'utiliser directement l'option dans le bloc de code pour éviter un balisage.\n\n\n**Une liste**  \n\n```{.mf}\n::: {.column-margin}\n\n* item1\n  * item11\n  * item12\n* item2 \n:::\n```\n\n::: {.column-margin}\n\n* item1\n  * item11\n  * item12\n* item2 \n:::\n\n**Une formule**\n\n```{.mf}\n::: {.column-margin}\n$$x^2-1=(x-1)(x+1)$$\n:::\n```\n\n\n::: {.column-margin}\n$$x^2-1=(x-1)(x+1)$$\n:::\n\n**Un tableau markdown**\n\n::: {.column-margin}\n| Col1 | Col2 |\n|------|------|\n| A    | B    |\n| C    | D    |\n: Tableau markdown\n:::\n\n```{.mf}\n::: {.column-margin}\n| Col1 | Col2 |\n|------|------|\n| A    | B    |\n| C    | D    |\n: Tableau markdown\n:::\n```\n\nA noter que l'on peut appliquer directement **`::: column-margin`**.\n\n### Options dans un bloc de codes\n\n* Option **`#| column: margin`**.\n* Pour les graphiques, l'ajout d'un label semble obligatoire, je ne comprend pas vraiment pourquoi.\n\n**Graphique**\n\n\n\n\n::: {.cell .column-margin}\n::: {.cell-output-display}\n![Consommation selon l'origine](043-layout_files/figure-html/fig-mpg-1.png){#fig-mpg width=672}\n:::\n:::\n\n\n\n\n```{{r}}\n#| label: fig-mpg\n#| column: margin\n#| fig-cap: \"Consommation selon l'origine\"\n#| warning: false \n#| message: false\n\nlibrary(ggplot2)\nmtcars$am = as.factor(mtcars$am)\n\nggplot(mtcars, aes(x=mpg, fill=am)) +\n       geom_density(alpha=0.4)\n```\n\n**Tableau**\n\n\n\n\n::: {.cell .column-margin tbl-cap='Extrait base mtcars'}\n::: {.cell-output-display}\n\n\n|              |  mpg| cyl| disp|\n|:-------------|----:|---:|----:|\n|Mazda RX4     | 21.0|   6|  160|\n|Mazda RX4 Wag | 21.0|   6|  160|\n|Datsun 710    | 22.8|   4|  108|\n\n\n:::\n:::\n\n\n\n\n```{{r}}\n#| tbl-cap: \"Extrait base mtcars\"\n#| column: margin\n\nknitr::kable(\n  mtcars[1:3, 1:3]\n)\n```\n\n\n\n### Note à droite du texte\n\nLes notes font l'objet d'un traitement particulier. Le positionnement dans la marge se fait avec l'utilisation de la classe css **`.aside`**. \nAttention comme la note est directement visible, aucun numéro ne lui est affecté.\n\n```{.md}\nOn peut ajouter une note directement à droite du texte avec la classe css\n**.aside**[Comme elle se situe directement à droite du texte, aucun numéro\nde note n'est généré]{.aside}\n```\n\nOn peut ajouter une note directement à droite du texte avec la classe css **.aside**[Comme elle se situe directement à droite du texte, aucun numéro de note n'est généré]{.aside}.\n\n\n## Mise en page sous forme de vignettes des images/graphiques {#sec-img}\n\nDeux types d'insertion: **fixe** ou **libre**\n\n### Mise en forme fixe {#sec-ncol}\n\n* Classe css ou option d'un bloc de codes:  **`layout-ncol`**\n  * Insertion markdown:  **`::: {layout-ncol=nbre_col}`**\n    * Attention, la classe css n'est pas préfixée par un **.**.\n  * Bloc de codes: option **` #| layout-ncol: nbre_col`**\n\n\n***Exemple: insertion d'images markdown sous forme de vignettes***\n\n```{.mf}\n::: {layout-ncol=4}\n![](img5/img1.png){group=\"g1\"}\n\n![](img5/img2.png){group=\"g1\"}\n\n![](img5/img3.png){group=\"g1\"}\n\n![](img5/img4.png){group=\"g1\"}\n:::\n```\n\n::: {layout-ncol=4}\n![](img5/img1.png){group=\"g1\"}\n\n![](img5/img2.png){group=\"g1\"}\n\n![](img5/img3.png){group=\"g1\"}\n\n![](img5/img4.png){group=\"g1\"}\n:::\n\n\n***Exemple: deux graphiques générés par un programme***\n\n```{{r}}\n#| echo: false\n#| warning: false \n#| message: false\n#| layout-ncol: 2\n\nlibrary(ggplot2)\nmtcars$am = as.factor(mtcars$am)\n\nmpg = ggplot(mtcars, aes(x=mpg, fill=am)) +\n  geom_density(alpha=0.4)\n  \ndisp = ggplot(mtcars, aes(x=disp, fill=am)) +\n  geom_density(alpha=0.4)\n\nmpg\ndisp\n```\n\n\n\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![](043-layout_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](043-layout_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::\n\n\n\n\n\n### Mise en forme libre \n\n* Classe css **`{layout= ... }`**. De nouveau non préfixée par un **.**\n  * Plus compliqué au premier abord en raison de la syntaxe, mais plus souple pour jouer sur l'espace entre deux images.\n  * On va renseigner les ratios d'affichage entre les différentes images par des valeurs.\n  * On peut modifier l'espace entre deux images.\n* En option d'un bloc de codes: **`#| layout: ...`**\n  \nSyntaxe par l'exemple avec deux images:\n\n* **`:::{layout= \"[valeur1,valeur2]\"}`**\n  * *Valeur1* et *valeur2* n'indique pas une taille d'affichage des images mais le ratio d'affichage entre les deux. \n  \nLes images seront affichées de manière identique lorsque les valeurs sont identiques^[Elles sont ici enregistrées avec des tailles identiques également].\n\n\n```{.mf}  \n::: {layout=\"[50,50]\"}\n![](img5/img1.png) \n\n![](img5/img2.png)\n\n:::\n```\n\n\n::: {layout=\"[50,50]\"}\n![](img5/img1.png) \n\n![](img5/img2.png)\n:::\n\n\nSi on remplace [50,50] par [1,1]:\n\n```{.mf}  \n::: {layout=\"[1,1]\" }\n![](img5/img1.png) \n\n![](img5/img2.png)\n\n:::\n```\n\n\nL'affichage des vignettes ne change pas:\n\n::: {layout=\"[1,1]\"}\n![](img5/img1.png) \n\n![](img5/img2.png)\n:::\n\nMaintenant si on modifie le ratio de la manière suivante:\n\n```{.mf}  \n::: {layout=\"[1,0.5]\" }\n![](img5/img1.png) \n\n![](img5/img2.png)\n\n:::\n```\n\n::: {layout=\"[1,0.5]\"}\n![](img5/img1.png) \n\n![](img5/img2.png)\n:::\n\nLa seconde image n'est affiché qu'à 50%, et aligné vers le haut.\n\nVu comme ça, l'utilité n'est pas évidente. Si les images sont enregistrées avec des hauteurs différentes, cela peut-être néanmoins intéressant que l'espace soit rempli identiquement pour les deux images.\n\nExemple: On a une image nativement moins haute que l'autre de 25%: avec un ratio égal à 1 on aurait:\n\n``` {.mf}\n::: {layout=\"[1,1]\"}\n![](img5/img4.png) \n\n![](img5/img10.png)\n:::\n```\n\n\n::: {layout=\"[1,1]\"}\n![](img5/img4.png) \n\n![](img5/img10.png)\n:::\n\n* Si on veut égaliser les hauteurs d'affichage, on rééquilibre le ratio: **`{layout=\"[0.75,1]\"}`**^[Même résultat avec `[1,1.25]`].\n\n```{.mf}\n::: {layout=\"[0.75,1]\"}\n![](img5/img4.png) \n\n![](img5/img10.png)\n:::\n```\n\n\n::: {layout=\"[0.75,1]\"}\n![](img5/img4.png) \n\n![](img5/img10.png)\n:::\n\n* Si on ne souhaite pas modifier le ratio d'affichage, il est visuellement plus correct d'aligner verticalement les images vers le bas avec l'option **`layout-valign=\"bottom\"`**\n\n\n``` {.mf}\n::: {layout=\"[1,1]\" layout-valign=\"bottom\"}\n![](img5/img4.png) \n\n![](img5/img10.png)\n:::\n```\n\n\n::: {layout=\"[1,1]\" layout-valign=\"bottom\"}\n![](img5/img4.png) \n\n![](img5/img10.png)\n:::\n\n\n* Pour afficher des images sur plusieurs lignes on ajoute une nouvelle  liste d'images séparée de la précédente avec  **,** et en cloturant le tout dans des crochets:\n  * `::: {layout=\"[[liste ligne 1],[liste ligne 2]]\"}`.\n\n\n```{.mf}\n::: {layout=\"[[1,1,1,1],[1,1,1,1]]\"}\n![](img5/img1.png)\n\n![](img5/img2.png)\n\n![](img5/img3.png)\n\n![](img5/img4.png)\n\n![](img5/img5.png)\n\n![](img5/img6.png)\n\n![](img5/img7.png)\n\n![](img5/img8.png)\n:::\n```\n\n::: {layout=\"[[1,1,1,1],[1,1,1,1]]\"}\n![](img5/img1.png)\n\n![](img5/img2.png)\n\n![](img5/img3.png)\n\n![](img5/img4.png)\n\n![](img5/img5.png)\n\n![](img5/img6.png)\n\n![](img5/img7.png)\n\n![](img5/img8.png)\n:::\n\n\n\n* On peut modifier (agrandir) l'espace entre 2 images avec des valeurs négatives entre deux images.\n\nPar défaut avec 2 images:\n\n```{.mf}\n::: {layout=\"[1,1]\"}\n![](img5/img4.png)\n\n![](img5/img8.png)\n:::\n```\n\n::: {layout=\"[1,1]\"}\n![](img5/img4.png)\n\n![](img5/img8.png)\n:::\n\nSi on veut accroître la distances entre les deux images d'un dizième de la largeur des images\n\n```{.mf}\n::: {layout=\"[1,-0.1,1]\"}\n\n![](img5/img4.png)\n\n![](img5/img8.png)\n:::\n```\n\n\n::: {layout=\"[1,-0.1,1]\"}\n![](img5/img4.png)\n\n![](img5/img8.png)\n\n:::\n\nSi on veut que la distance soit égale à la largeur des images\n\n```{.mf}\n::: {layout=\"[1,-1,1]\"}\n\n![](img5/img4.png)\n\n![](img5/img8.png)\n:::\n```\n\n::: {layout=\"[1,-1,1]\"}\n![](img5/img4.png)\n\n![](img5/img8.png)\n:::\n\n* Fonctionne également, sous forme d'option, avec des graphiques générés dans un bloc de codes.\n\n\n\n\n::: {.cell layout=\"[[1],[0.5,0.5]]\"}\n\n````{.cell-code}\n```{{r}}\n#| eval: false\n#| warning: false\n#| message: false\n#| layout: \"[[1],[0.5,0.5]]\"\n\nlibrary(ggplot2)\n\nmtcars$am = as.factor(mtcars$am)\n\nmpg=ggplot(mtcars, aes(x=mpg, fill=am)) +\n  geom_density(alpha=0.4)\n\ndisp=ggplot(mtcars, aes(x=disp, fill=am)) +\n  geom_density(alpha=0.4)\n\nwt=ggplot(mtcars, aes(x=wt, fill=am)) +\n  geom_density(alpha=0.4)\n\nwt\nmpg\ndisp\n```\n````\n:::\n\n::: {.cell layout=\"[[1],[0.5,0.5]]\"}\n::: {.cell-output-display}\n![](043-layout_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](043-layout_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](043-layout_files/figure-html/unnamed-chunk-5-3.png){width=672}\n:::\n:::\n",
    "supporting": [
      "043-layout_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}